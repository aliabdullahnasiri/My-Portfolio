{% with f = form.u %}
<form
  method="POST"
  action="{{ url_for('api.update_user') }}"
  data-get="{{ url_for('api.fetch_user', uid='@') }}"
  enctype="multipart/form-data"
>
  {{ f.hidden_tag() }}

  <div class="row mb-5 mt-4">
    <div class="col-md-12">
      <div class="d-flex justify-content-center">
        <div class="avatar position-relative drop-zone">
          <img
            src="{{ DEFAULT_AVATAR_URL }}"
            alt="profile_image"
            class="rounded-pill shadow-sm shadow-xl w-100 cursor-pointer output"
            data-role="image"
          />
          {{ f.avatar(class="form-control d-none") }}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-4">
      <div class="my-2">
        <div class="input-group input-group-outline">
          {{ f.first_name.label(class="form-label") }} {{
          f.first_name(class="form-control") }}
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="my-2">
        <div class="input-group input-group-outline">
          {{ f.middle_name.label(class="form-label") }} {{
          f.middle_name(class="form-control is-invalid") }}
        </div>
      </div>
    </div>

    <div class="col-md-4">
      <div class="my-2">
        <div class="input-group input-group-outline">
          {{ f.last_name.label(class="form-label") }} {{
          f.last_name(class="form-control") }}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="my-2">
        <div class="input-group input-group-outline">
          {{ f.user_name.label(class="form-label") }} {{
          f.user_name(class="form-control") }}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="my-2">
        <div class="input-group input-group-outline">
          {{ f.email.label(class="form-label") }} {{
          f.email(class="form-control") }}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="my-2">
        <div class="input-group input-group-outline">
          {{ f.password.label(class="form-label") }} {{
          f.password(class="form-control") }}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="my-2">
        <div class="px-2 py-0 my-0">
          {{ f.birthday.label(class="form-label") }}
        </div>
        <div class="input-group input-group-outline">
          {{ f.birthday(class="form-control") }}
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-md-12">
      <div class="my-2">
        <div class="multi-value-input card">
          <div class="input-group input-group-outline">
            {{ f.phones.label(class="form-label") }} {{
            f.phones(class="form-control") }}
          </div>
          <div class="values d-flex flex-wrap"></div>
        </div>
      </div>
    </div>
  </div>

  {% if not profile %}
  <div class="row">
    <div class="col-md-12">
      <div class="my-2">
        <div class="multi-value-input card">
          <div class="input-group input-group-outline">
            {{ f.roles.label(class="form-label") }} {{
            f.roles(class="form-control") }}
          </div>
          <div class="values d-flex flex-wrap"></div>
        </div>
      </div>
    </div>
  </div>
  {% endif %}

  <div class="row my-3">
    <div class="col-md-12">
      <div class="text-center">
        {{ f.submit(class="btn bg-gradient-info btn-lg w-100 mt-4 mb-0") }}
      </div>
    </div>
  </div>
</form>
{% endwith %}
